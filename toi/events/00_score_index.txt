add_namespace = score_index

news_event = {
    id = score_index.0
    picture = GFX_report_event_election_vote
    
    is_triggered_only = yes

    hidden = yes

    immediate = {

        # set_variable = {
            # var = global.global_liberty
            # value = 0
        # }

        # set_variable = {
            # var = global.global_industrial_liberty
            # value = 0
        # }

        # set_variable = {
            # var = global.global_agrarian_liberty
            # value = 0
        # }

        every_country = {

            #Initial calculation
            #Whenever this calculation runs, also add modified_liberty, which is a separate variable that stores liberty
            #from events, decisions and other sources
			set_variable = {
                var = overall_score 
                value = 0 
            }
            set_variable = {
                var = industrial_score 
                value = 0 
            }
            set_variable = {
                var = military_score 
                value = 0
            }

            add_to_variable = { industrial_score = modified_industrial_score }

            #amount of factories 
			    set_temp_variable = { num_of_military_factories_temp = num_of_military_factories }
				multiply_temp_variable = { num_of_military_factories_temp = 1 }			
                add_to_variable = { modified_industrial_score = num_of_military_factories_temp }		
			    set_temp_variable = { num_of_civilian_factories_temp = num_of_civilian_factories	}
				multiply_temp_variable = { num_of_civilian_factories_temp = 1 }			
                add_to_variable = { modified_industrial_score = num_of_civilian_factories_temp }			
			    set_temp_variable = { num_of_naval_factories_temp = num_of_naval_factories }
				multiply_temp_variable = { num_of_naval_factories_temp = 1 }			
                add_to_variable = { modified_industrial_score = num_of_naval_factories_temp }	
				set_temp_variable = { resource_producedwood_temp = resource_produced@wood }
				multiply_temp_variable = { resource_producedwood_temp = 0.10 }
                add_to_variable = { modified_industrial_score = resource_producedwood_temp }
				set_temp_variable = { resource_producedcoal_temp = resource_produced@coal }
				multiply_temp_variable = { resource_producedcoal_temp = 0.45 }
                add_to_variable = { modified_industrial_score = resource_producedcoal_temp }
				set_temp_variable = { resource_producedcotton_temp = resource_produced@cotton }
				multiply_temp_variable = { resource_producedcotton_temp = 0.20 }
                add_to_variable = { modified_industrial_score = resource_producedcotton_temp }
				set_temp_variable = { resource_producedfabric_temp = resource_produced@fabric }
				multiply_temp_variable = { resource_producedfabric_temp = 0.30 }
                add_to_variable = { modified_industrial_score = resource_producedfabric_temp }
				set_temp_variable = { resource_producediron_temp = resource_produced@iron }
				multiply_temp_variable = { resource_producediron_temp = 0.35 }
                add_to_variable = { modified_industrial_score = resource_producediron_temp }
				set_temp_variable = { resource_producedsteel_temp = resource_produced@steel }
				multiply_temp_variable = { resource_producedsteel_temp = 0.45 }
                add_to_variable = { modified_industrial_score = resource_producedsteel_temp }
				set_temp_variable = { resource_producedrubber_temp = resource_produced@rubber }
				multiply_temp_variable = { resource_producedrubber_temp = 0.35 }
                add_to_variable = { modified_industrial_score = resource_producedrubber_temp }
				set_temp_variable = { resource_producedoil_temp = resource_produced@oil }
				multiply_temp_variable = { resource_producedoil_temp = 0.75 }
                add_to_variable = { modified_industrial_score = resource_producedoil_temp }
				set_temp_variable = { resource_producedplastics_temp = resource_produced@plastics }
				multiply_temp_variable = { resource_producedplastics_temp = 0.45 }
                add_to_variable = { modified_industrial_score = resource_producedplastics_temp }
				set_temp_variable = { resource_producedaluminium_temp = resource_produced@aluminium }
				multiply_temp_variable = { resource_producedaluminium_temp = 0.60 }
                add_to_variable = { modified_industrial_score = resource_producedaluminium_temp }
				set_temp_variable = { resource_producedtungsten_temp = resource_produced@tungsten }
				multiply_temp_variable = { resource_producedtungsten_temp = 0.45 }
                add_to_variable = { modified_industrial_score = resource_producedtungsten_temp }
				set_temp_variable = { resource_producedchromium_temp = resource_produced@chromium }
				multiply_temp_variable = { resource_producedchromium_temp = 0.40 }
                add_to_variable = { modified_industrial_score = resource_producedchromium_temp }
				set_temp_variable = { resource_producedtitanium_temp = resource_produced@titanium }
				multiply_temp_variable = { resource_producedtitanium_temp = 0.40 }
                add_to_variable = { modified_industrial_score = resource_producedtitanium_temp }
				set_temp_variable = { resource_producedsilicates_temp = resource_produced@silicates }
				multiply_temp_variable = { resource_producedsilicates_temp = 0.45  }
                add_to_variable = { modified_industrial_score = resource_producedsilicates_temp }
				set_temp_variable = { resource_producedceramics_temp = resource_produced@ceramics }
				multiply_temp_variable = { resource_producedceramics_temp = 0.20 }
                add_to_variable = { modified_industrial_score = resource_producedceramics_temp }
				set_temp_variable = { resource_producedmachine_parts_temp = resource_produced@machine_parts }
				multiply_temp_variable = { resource_producedmachine_parts_temp = 0.55 }
                add_to_variable = { modified_industrial_score = resource_producedmachine_parts_temp }
				set_temp_variable = { resource_producedrare_earth_metals_temp = resource_produced@rare_earth_metals }
				multiply_temp_variable = { resource_producedrare_earth_metals_temp = 0.70 }
                add_to_variable = { modified_industrial_score = resource_producedrare_earth_metals_temp }
				set_temp_variable = { resource_producedeletronics_temp = resource_produced@eletronics }
				multiply_temp_variable = { resource_producedeletronics_temp = 0.50 }
                add_to_variable = { modified_industrial_score = resource_producedeletronics_temp }
				set_temp_variable = { resource_producedportable_power_temp = resource_produced@portable_power }
				multiply_temp_variable = { resource_producedportable_power_temp = 0.50 }
                add_to_variable = { modified_industrial_score = resource_producedportable_power_temp }		
				
				set_temp_variable = { modifierindustrial_capacity_factory_temp = modifier@industrial_capacity_factory }
				add_to_temp_variable = { modifierindustrial_capacity_factory_temp = 1 }
				multiply_temp_variable = { modifierindustrial_capacity_factory_temp = 1.5 }
                add_to_variable = { modified_industrial_score = modifierindustrial_capacity_factory_temp }	
				
				set_temp_variable = { modifierproduction_speed_industrial_complex_factor_temp = modifier@production_speed_industrial_complex_factor }
				add_to_temp_variable = { modifierproduction_speed_industrial_complex_factor_temp = 1 }
				multiply_temp_variable = { modifierproduction_speed_industrial_complex_factor_temp = 2 }	
                add_to_variable = { modified_industrial_score = modifierproduction_speed_industrial_complex_factor_temp }	
				
				set_temp_variable = { modifierproduction_factory_efficiency_gain_factor_temp = modifier@production_factory_efficiency_gain_factor }
				add_to_temp_variable = { modifierproduction_factory_efficiency_gain_factor_temp = 1 }
				multiply_temp_variable = { modifierproduction_factory_efficiency_gain_factor_temp = 2 }	
                add_to_variable = { modified_industrial_score = modifierproduction_factory_efficiency_gain_factor_temp }	
				
				set_temp_variable = { modifierconsumer_goods_factor_temp = modifier@consumer_goods_factor }
				add_to_temp_variable = { modifierconsumer_goods_factor_temp = 1 }
				multiply_temp_variable = { modifierconsumer_goods_factor_temp = 2 }	
                add_to_variable = { modified_industrial_score = modifierconsumer_goods_factor_temp }	
				
				set_temp_variable = { production_factory_start_efficiency_factor_temp = modifier@production_factory_start_efficiency_factor }
				add_to_temp_variable = { production_factory_start_efficiency_factor_temp = 1 }
				multiply_temp_variable = { production_factory_start_efficiency_factor_temp = 2 }	
                add_to_variable = { modified_industrial_score = production_factory_start_efficiency_factor_temp }		
                if = {
				    limit = { is_puppet = yes }
					OVERLORD = {
					    set_temp_variable = { modified_industrial_score_puppet_temp = PREV.modified_industrial_score }
						multiply_temp_variable = { modified_industrial_score_puppet_temp = 0.25 }	
					    add_to_variable = { 
					        modified_industrial_score = modified_industrial_score_puppet_temp  
				        }
				    }
				    subtract_from_variable = { 
					    modified_industrial_score = modified_industrial_score_puppet_temp  
				    }
				}				
				if = {
				    limit = { has_idea = agrarian }
					set_temp_variable = { modified_industrial_score_temp = modified_industrial_score }
					multiply_temp_variable = { modified_industrial_score_temp = 0.50 }
					set_variable = { modified_industrial_score = modified_industrial_score_temp }
				}
				if = {
				    limit = { has_idea = industrializing }
					set_temp_variable = { modified_industrial_score_temp = modified_industrial_score }
					multiply_temp_variable = { modified_industrial_score_temp = 0.75 }
					set_variable = { modified_industrial_score = modified_industrial_score_temp }  				
				}
				if = {
				    limit = { has_idea = industrialized }
					set_temp_variable = { modified_industrial_score_temp = modified_industrial_score }
					multiply_temp_variable = { modified_industrial_score_temp = 0.85 }
					set_variable = { modified_industrial_score = modified_industrial_score_temp }
				}
				else_if = {
				    limit = { has_idea = electrification }
					set_temp_variable = { modified_industrial_score_temp = modified_industrial_score }
					multiply_temp_variable = { modified_industrial_score_temp = 0.90 }
					set_variable = { modified_industrial_score = modified_industrial_score_temp }
				}
				else = {
				}

            add_to_variable = { military_score = modified_military_score }
			
			    set_temp_variable = { num_divisions_temp = num_divisions }
				multiply_temp_variable = { num_divisions_temp = 2.25 }
				add_to_variable = { modified_military_score = num_divisions_temp }
			    set_temp_variable = { has_war_support_temp = has_war_support }
				add_to_temp_variable = { has_war_support_temp = 1 }
				multiply_temp_variable = { has_war_support_temp = 2 }
				add_to_variable = { modified_military_score = has_war_support_temp }
			    set_temp_variable = { land_doctrine_level_temp = land_doctrine_level }
				multiply_temp_variable = { land_doctrine_level_temp = 2 }
				add_to_variable = { modified_military_score = land_doctrine_level_temp }
			    set_temp_variable = { modifierarmy_org_temp = modifier@army_org  }
				add_to_temp_variable = { modifierarmy_org_temp = 7 }
				multiply_temp_variable = { modifierarmy_org_temp  = 2 }
				add_to_variable = { modified_military_score = modifierarmy_org_temp  }
			    set_temp_variable = { modifiermax_planning_temp = modifier@max_planning }
				add_to_temp_variable = { modifiermax_planning_temp = 1 }
				multiply_temp_variable = { modifiermax_planning_temp = 2 }
				add_to_variable = { modified_military_score = modifiermax_planning_temp }
                if = {
				    limit = { is_puppet = yes }
					OVERLORD = {
					    set_temp_variable = { modified_military_score_puppet_temp = PREV.modified_military_score }
						multiply_temp_variable = { modified_military_score_puppet_temp = 0.5 }	
					    add_to_variable = { 
					        modified_industrial_score = modified_military_score_puppet_temp  
				        }
				    }
				    subtract_from_variable = { 
					    modified_military_score = modified_military_score_puppet_temp  
				    }
				}		
				if = {
				    limit = { has_idea = law_army_tribal_neolithic }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = {modified_military_score_temp = 0.35 }
					set_variable = { modified_military_score = modified_military_score_temp }
				}
				if = {
				    limit = { has_idea = law_army_tribal_basic }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = {modified_military_score_temp = 0.45 }
					set_variable = { modified_military_score = modified_military_score_temp }
				}
				if = {
				    limit = { has_idea = law_army_tribal_improved }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = {modified_military_score_temp = 0.55 }
					set_variable = { modified_military_score = modified_military_score_temp }
				}
				if = {
				    limit = { has_idea = law_army_tribal_advanced }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = {modified_military_score_temp = 0.60 }
					set_variable = { modified_military_score = modified_military_score_temp }
				}
				if = {
				    limit = { has_idea = law_pre_industrial_army }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = {modified_military_score_temp = 0.65 }
					set_variable = { modified_military_score = modified_military_score_temp }
				}
				if = {
				    limit = { has_idea = law_victorian_army }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = { modified_military_score_temp = 0.75 }
					set_variable = { modified_military_score = modified_military_score_temp }  				
				}
				if = {
				    limit = { has_idea = law_victorian_army_prussia }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = { modified_military_score_temp = 0.80 }
					set_variable = { modified_military_score = modified_military_score_temp }  				
				}
				if = {
				    limit = { has_idea = law_trench_infantry }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = { modified_military_score_temp = 0.85 }
					set_variable = { modified_military_score = modified_military_score_temp }
				}
				if = {
				    limit = { has_idea = law_combined_arms }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = { modified_military_score_temp = 0.90 }
					set_variable = { modified_military_score = modified_military_score_temp }
				}
				if = {
				    limit = { has_idea = law_modern_army }
					set_temp_variable = { modified_military_score_temp = modified_military_score }
					multiply_temp_variable = { modified_military_score_temp = 0.95 }
					set_variable = { modified_military_score = modified_military_score_temp }
				}
				else = {
				}

			add_to_variable = { overall_score = industrial_score }				
			add_to_variable = { overall_score = military_score }
			add_to_variable = { overall_score = prestige_score }				
			add_to_variable = { overall_score = tech_score }
            clamp_variable = {
                var = overall_score
                min = 0
                max = 100000
            }
        }
    }
}